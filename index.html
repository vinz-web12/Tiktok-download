<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TikTok Downloader HD</title>
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: #111;
      color: white;
      text-align: center;
      padding: 30px;
    }
    input {
      width: 90%;
      padding: 10px;
      margin: 10px 0;
      border-radius: 10px;
      border: none;
      outline: none;
      font-size: 16px;
    }
    button {
      background: #00f2ea;
      color: black;
      border: none;
      padding: 12px 20px;
      border-radius: 10px;
      cursor: pointer;
      font-weight: bold;
      transition: 0.2s;
      margin: 5px;
    }
    button:hover {
      background: #fff;
      color: black;
    }
    .media-container {
      margin-top: 20px;
    }
    video, img {
      max-width: 90%;
      margin: 15px auto;
      border-radius: 12px;
      display: block;
    }
    .download-btn {
      display: inline-block;
      margin-bottom: 20px;
    }
  </style>
</head>
<body>
  <h2>TikTok Downloader HD ðŸŽµ</h2>
  <input id="url" type="text" placeholder="Tempel link TikTok di sini..." />
  <br>
  <button onclick="getMedia()">Download</button>

  <div id="media" class="media-container"></div>

  <script>
    async function getMedia() {
      const container = document.getElementById('media');
      container.innerHTML = '<p>Loading...</p>';
      const url = document.getElementById('url').value.trim();
      if (!url) return alert('Tempel dulu link TikTok-nya!');

      try {
        const api = `https://api.tiklydown.eu.org/api/download?url=${encodeURIComponent(url)}`;
        const res = await fetch(api);
        const data = await res.json();
        container.innerHTML = '';

        // tombol sound
        const soundBtn = document.createElement('button');
        soundBtn.textContent = 'ðŸŽµ Download Sound (MP3)';
        soundBtn.onclick = () => autoDownload(data.music.play_url, `sound_${Date.now()}.mp3`);
        container.appendChild(soundBtn);

        // kalau foto (slide)
        if (data.images && data.images.length > 0) {
          data.images.forEach((img, i) => {
            const imageEl = document.createElement('img');
            imageEl.src = img;
            container.appendChild(imageEl);

            const btn = document.createElement('button');
            btn.className = 'download-btn';
            btn.textContent = `Download slide ${i + 1}`;
            btn.onclick = () => autoDownload(img, `slide_${i + 1}_${Math.random().toString(36).substring(2,8)}.jpg`);
            container.appendChild(btn);
          });
        }
        // kalau video
        else if (data.video && data.video.play_addr) {
          const vid = document.createElement('video');
          vid.src = data.video.play_addr;
          vid.controls = true;
          vid.style.margin = '20px auto';
          container.appendChild(vid);

          const btn = document.createElement('button');
          btn.textContent = 'â¬‡ï¸ Download Video (HD)';
          btn.onclick = () => autoDownload(data.video.play_addr, `video_${Math.random().toString(36).substring(2,8)}.mp4`);
          container.appendChild(btn);
        } else {
          container.innerHTML = '<p>Gagal ambil media. Pastikan link valid!</p>';
        }

      } catch (err) {
        container.innerHTML = '<p>Gagal memproses link ðŸ˜¢</p>';
        console.error(err);
      }
    }

    function autoDownload(url, filename) {
      const a = document.createElement('a');
      a.href = url;
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
    }
  </script>
</body>
</html>
